package chopLifter;

import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import java.awt.image.ImageObserver;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.*;

import chopLifter.ChopLifterComponent.TimerHandler;

public class ImagePanel extends JPanel {
	Timer time;
	int degree = 0;
	Image imgCloud;

	public ImagePanel() {
		setVisible(true);
		setFocusable(true);
		setSize(640, 480);
		setBackground(Color.BLACK);
		time = new Timer(10, new TimerHandler());
		time.start();
		try {
			imgCloud = ImageIO.read(new File("images/cloud.png"));
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}
	
	public void rotates(double degrees, ImageObserver o){
		ImageIcon icon = new ImageIcon(imgCloud);
		BufferedImage blkimg = new BufferedImage(icon.getIconWidth(), icon.getIconHeight(), BufferedImage.TYPE_INT_ARGB);
		Graphics2D g2 = (Graphics2D)blkimg.getGraphics();
		g2.rotate(Math.toRadians(degree), 100+icon.getIconWidth()/2, 100+icon.getIconHeight()/2);
		g2.drawImage(imgCloud, 100, 100, o);
		imgCloud = blkimg;
	}
	
	public void paintComponent(Graphics g) {
		super.paintComponent(g);
//		Graphics2D g2d = (Graphics2D) g;
//		Rectangle rect1 = new Rectangle(100, 100, 100, 100);
//		g2d.setColor(Color.WHITE);
//		g2d.rotate(Math.toRadians(degree), rect1.getX()+rect1.getWidth()/2, rect1.getY()+rect1.getHeight()/2);
//		g2d.draw(rect1);
//		g2d.fill(rect1);
		ImageIcon icon = new ImageIcon(imgCloud);
		BufferedImage blkimg = new BufferedImage(icon.getIconWidth(), icon.getIconHeight(), BufferedImage.TYPE_INT_ARGB);
		Graphics2D g2 = (Graphics2D)blkimg.getGraphics();
		g2.rotate(Math.toRadians(degree), 100+icon.getIconWidth()/2, 100+icon.getIconHeight()/2);
		g2.drawImage(imgCloud, 100, 100, icon.getIconWidth(), icon.getIconHeight(), this);
		imgCloud = blkimg;
	}

	class TimerHandler implements ActionListener {
		public void actionPerformed(ActionEvent e) {
			degree++;
			repaint();
		}
	}

	public static void main(String[] arg) {
		System.out.println("Start Program");
		JFrame f = new JFrame("ChopLifter_박영현,정도환");
		f.setSize(640, 480);
		f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

		ImagePanel sc = new ImagePanel();
		f.add(sc);
		f.setVisible(true);
	}
}